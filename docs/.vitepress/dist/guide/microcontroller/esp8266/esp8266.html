<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ESP8266 | VitePress</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/assets/style.25cc8abd.css" as="style">
    
    <script type="module" src="/assets/app.83b5f1bd.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.dd5a1521.js">
    <link rel="modulepreload" href="/assets/chunks/theme.20cfa998.js">
    <link rel="modulepreload" href="/assets/guide_microcontroller_esp8266_esp8266.md.2969a179.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-a0fd61f4><div class="container" data-v-a0fd61f4><div class="title" data-v-a0fd61f4><div class="VPNavBarTitle has-sidebar" data-v-a0fd61f4 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!--[--><img class="VPImage logo" src="images/touxiang.png" alt data-v-8426fc1a><!--]--><!--[-->Simplemw&#39;s blog<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-a0fd61f4><div class="curtain" data-v-a0fd61f4></div><div class="content-body" data-v-a0fd61f4><!--[--><!--]--><div class="VPNavBarSearch search" data-v-a0fd61f4><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a0fd61f4 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>知识体系</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>前端</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/" data-v-43f1e123><!--[-->待学习<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>后端</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/guide/java/" data-v-43f1e123><!--[-->JAVA<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/guide/python/" data-v-43f1e123><!--[-->PYTHON<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>嵌入式</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/guide/microcontroller/" data-v-43f1e123><!--[-->单片机<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/other/about.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a0fd61f4 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-e6aabb21 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-a0fd61f4 data-v-40855f84 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-ce54a7d1 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-ce54a7d1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-ce54a7d1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a0fd61f4 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-79c8c1df><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-79c8c1df><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-79c8c1df><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-79c8c1df>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-79c8c1df data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-b00e2fdd><div class="curtain" data-v-b00e2fdd></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b00e2fdd><span class="visually-hidden" id="sidebar-aria-label" data-v-b00e2fdd> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-b00e2fdd><section class="VPSidebarItem level-0 collapsible has-active" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>ESP8266</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/guide/microcontroller/esp8266/esp8266.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>esp8266</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/guide/microcontroller/esp8266/esp8266-blinker.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>esp8266-blinker</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-b00e2fdd><div class="VPSidebarItem level-0 collapsible" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><p class="text" data-v-e31bd47b>STM32</p><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><!----></div></div><div class="group" data-v-b00e2fdd><div class="VPSidebarItem level-0 collapsible" data-v-b00e2fdd data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><p class="text" data-v-e31bd47b>ESP32</p><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><!----></div></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _guide_microcontroller_esp8266_esp8266" data-v-6b87e69f><div><h5 id="_1-建立网络连接" tabindex="-1">1.建立网络连接 <a class="header-anchor" href="#_1-建立网络连接" aria-label="Permalink to &quot;1.建立网络连接&quot;">​</a></h5><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//引入库函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidOut </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ESP8266&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">    //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordOut </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;12345678&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义密码</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  	Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">         //启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络    </span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">softAP</span><span style="color:#E1E4E8;">(ssidOut, passwordOut);</span><span style="color:#6A737D;">  //NodeMCU的AP模式(开放网络)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;                             </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;连接到的网络为:&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(WiFi.</span><span style="color:#B392F0;">SSID</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;分配的ip为:&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(WiFi.</span><span style="color:#B392F0;">localIP</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">//引入库函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidOut </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ESP8266&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">    //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordOut </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;12345678&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义密码</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  	Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">         //启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络    </span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">softAP</span><span style="color:#24292E;">(ssidOut, passwordOut);</span><span style="color:#6A737D;">  //NodeMCU的AP模式(开放网络)</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;                             </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;连接到的网络为:&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(WiFi.</span><span style="color:#6F42C1;">SSID</span><span style="color:#24292E;">()); </span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;分配的ip为:&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(WiFi.</span><span style="color:#6F42C1;">localIP</span><span style="color:#24292E;">()); </span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h5 id="_2-json解析" tabindex="-1">2.JSON解析 <a class="header-anchor" href="#_2-json解析" aria-label="Permalink to &quot;2.JSON解析&quot;">​</a></h5><p><a href="https://arduinojson.org/v5/assistant/#/step2" target="_blank" rel="noreferrer">自动生成工具</a></p><h6 id="解析" tabindex="-1">解析 <a class="header-anchor" href="#解析" aria-label="Permalink to &quot;解析&quot;">​</a></h6><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ArduinoJson.h&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//解析</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">size_t</span><span style="color:#E1E4E8;"> capacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_ARRAY_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_OBJECT_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">40</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    DynamicJsonBuffer </span><span style="color:#B392F0;">jsonBuffer</span><span style="color:#E1E4E8;">(capacity);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> json </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;[{</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">name</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">:</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">test</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">,</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">message</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">:</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">testMessage</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">}]&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    JsonArray</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> root </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> jsonBuffer.</span><span style="color:#B392F0;">parseArray</span><span style="color:#E1E4E8;">(json);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> root_0_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">root</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">][</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;test&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> root_0_message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">root</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">][</span><span style="color:#9ECBFF;">&quot;message&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;testMessage&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ArduinoJson.h&gt;</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//解析</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">size_t</span><span style="color:#24292E;"> capacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_ARRAY_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_OBJECT_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">40</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    DynamicJsonBuffer </span><span style="color:#6F42C1;">jsonBuffer</span><span style="color:#24292E;">(capacity);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> json </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;[{</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">name</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">:</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">test</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">,</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">message</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">:</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">testMessage</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">}]&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    JsonArray</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> root </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jsonBuffer.</span><span style="color:#6F42C1;">parseArray</span><span style="color:#24292E;">(json);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> root_0_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">root</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">][</span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;test&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> root_0_message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">root</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">][</span><span style="color:#032F62;">&quot;message&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;testMessage&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h6 id="生成" tabindex="-1">生成 <a class="header-anchor" href="#生成" aria-label="Permalink to &quot;生成&quot;">​</a></h6><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ArduinoJson.h&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//生成</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">size_t</span><span style="color:#E1E4E8;"> capacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_ARRAY_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_OBJECT_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    DynamicJsonBuffer </span><span style="color:#B392F0;">jsonBuffer</span><span style="color:#E1E4E8;">(capacity);</span></span>
<span class="line"><span style="color:#E1E4E8;">    JsonArray</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> root </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> jsonBuffer.</span><span style="color:#B392F0;">createArray</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    JsonObject</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> root_0 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> root.</span><span style="color:#B392F0;">createNestedObject</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">root_0</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;test&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FFAB70;">root_0</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;message&quot;</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;testMessage&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    root.</span><span style="color:#B392F0;">printTo</span><span style="color:#E1E4E8;">(Serial);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ArduinoJson.h&gt;</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//生成</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">size_t</span><span style="color:#24292E;"> capacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_ARRAY_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_OBJECT_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    DynamicJsonBuffer </span><span style="color:#6F42C1;">jsonBuffer</span><span style="color:#24292E;">(capacity);</span></span>
<span class="line"><span style="color:#24292E;">    JsonArray</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> root </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jsonBuffer.</span><span style="color:#6F42C1;">createArray</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    JsonObject</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> root_0 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> root.</span><span style="color:#6F42C1;">createNestedObject</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">root_0</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;test&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#E36209;">root_0</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;message&quot;</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;testMessage&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    root.</span><span style="color:#6F42C1;">printTo</span><span style="color:#24292E;">(Serial);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h5 id="_3-网络请求" tabindex="-1">3.网络请求 <a class="header-anchor" href="#_3-网络请求" aria-label="Permalink to &quot;3.网络请求&quot;">​</a></h5><h6 id="服务端" tabindex="-1">服务端 <a class="header-anchor" href="#服务端" aria-label="Permalink to &quot;服务端&quot;">​</a></h6><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//引入wifi库函数</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WebServer.h&gt;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">//引入webserver库函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidOut </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ESP8266&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">    //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordOut </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;12345678&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义密码</span></span>
<span class="line"><span style="color:#E1E4E8;">ESP8266WebServer </span><span style="color:#B392F0;">esp8266_server</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> 	//设置服务器暴露端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">	Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">         //启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络    </span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">softAP</span><span style="color:#E1E4E8;">(ssidOut, passwordOut);</span><span style="color:#6A737D;">  //NodeMCU的AP模式(开放网络)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;                             </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;连接到的网络为:&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(WiFi.</span><span style="color:#B392F0;">SSID</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;分配的ip为:&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(WiFi.</span><span style="color:#B392F0;">localIP</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> 						//启动服务器</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">, handleRoot);</span><span style="color:#6A737D;">				//连接成功回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">onNotFound</span><span style="color:#E1E4E8;">(handleNotFound);</span><span style="color:#6A737D;"> 		//连接失败回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">  esp8266_server.</span><span style="color:#B392F0;">handleClient</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">     // 处理http服务器访问</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleRoot</span><span style="color:#E1E4E8;">() {</span><span style="color:#6A737D;"> //成功回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">  esp8266_server.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;text/plain&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;hello word&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleNotFound</span><span style="color:#E1E4E8;">(){</span><span style="color:#6A737D;">	//失败回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">  esp8266_server.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">404</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;text/plain&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;404: Not found&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">//引入wifi库函数</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WebServer.h&gt;</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">//引入webserver库函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidOut </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ESP8266&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">    //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordOut </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;12345678&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义密码</span></span>
<span class="line"><span style="color:#24292E;">ESP8266WebServer </span><span style="color:#6F42C1;">esp8266_server</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> 	//设置服务器暴露端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">	Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">         //启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络    </span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">softAP</span><span style="color:#24292E;">(ssidOut, passwordOut);</span><span style="color:#6A737D;">  //NodeMCU的AP模式(开放网络)</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;                             </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;连接到的网络为:&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(WiFi.</span><span style="color:#6F42C1;">SSID</span><span style="color:#24292E;">()); </span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;分配的ip为:&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(WiFi.</span><span style="color:#6F42C1;">localIP</span><span style="color:#24292E;">()); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> 						//启动服务器</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">, handleRoot);</span><span style="color:#6A737D;">				//连接成功回调函数</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">onNotFound</span><span style="color:#24292E;">(handleNotFound);</span><span style="color:#6A737D;"> 		//连接失败回调函数</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">  esp8266_server.</span><span style="color:#6F42C1;">handleClient</span><span style="color:#24292E;">();</span><span style="color:#6A737D;">     // 处理http服务器访问</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleRoot</span><span style="color:#24292E;">() {</span><span style="color:#6A737D;"> //成功回调函数</span></span>
<span class="line"><span style="color:#24292E;">  esp8266_server.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;text/plain&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;hello word&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleNotFound</span><span style="color:#24292E;">(){</span><span style="color:#6A737D;">	//失败回调函数</span></span>
<span class="line"><span style="color:#24292E;">  esp8266_server.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">404</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;text/plain&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;404: Not found&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//引入wifi库函数</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WebServer.h&gt;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">//引入webserver库函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">buttonPin</span><span style="color:#E1E4E8;"> D3</span><span style="color:#6A737D;">            //引入按钮引脚D3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#F97583;">bool</span><span style="color:#E1E4E8;"> pinState;</span><span style="color:#6A737D;">  //存储引脚状态用变量</span></span>
<span class="line"><span style="color:#E1E4E8;">ESP8266WebServer </span><span style="color:#B392F0;">esp8266_server</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> 	//设置服务器暴露端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">pinMode</span><span style="color:#E1E4E8;">(LED_BUILTIN, OUTPUT);</span><span style="color:#6A737D;"> //设置内置LED引脚为输出模式以便控制LED</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">	Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">         //启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;                             </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;连接到的网络为:&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(WiFi.</span><span style="color:#B392F0;">SSID</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;分配的ip为:&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(WiFi.</span><span style="color:#B392F0;">localIP</span><span style="color:#E1E4E8;">()); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//启动服务器</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//GET请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">, HTTP_GET ,handleRoot);	</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//GET请求</span></span>
<span class="line"><span style="color:#E1E4E8;">	esp8266_server.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/refresh&quot;</span><span style="color:#E1E4E8;">, HTTP_POST ,handrefresh);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建post请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/led&quot;</span><span style="color:#E1E4E8;">, HTTP_POST, handleLed);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建post请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">on</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/send&quot;</span><span style="color:#E1E4E8;">, HTTP_GET, handSend);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//连接失败回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">onNotFound</span><span style="color:#E1E4E8;">(handleNotFound); 		</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//监听http请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">handleClient</span><span style="color:#E1E4E8;">();     </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//获取引脚状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    pinState </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">digitalRead</span><span style="color:#E1E4E8;">(buttonPin); </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleRoot</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//返回html</span></span>
<span class="line"><span style="color:#E1E4E8;">	esp8266_server.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;text/html&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;&lt;form action=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">/led</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;"> method=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">POST</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">&gt;&lt;input type=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">submit</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;"> value=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">Toggle LED</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">&gt;&lt;/form&gt;&lt;form action=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">/refresh</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;"> method=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">POST</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">&gt;&lt;input type=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">submit</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;"> value=</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">REFRESH</span><span style="color:#79B8FF;">\&quot;</span><span style="color:#9ECBFF;">&gt;&lt;/form&gt;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleNotFound</span><span style="color:#E1E4E8;">(){</span><span style="color:#6A737D;">	//失败回调函数</span></span>
<span class="line"><span style="color:#E1E4E8;">	esp8266_server.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">404</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;text/plain&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;404: Not found&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handrefresh</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//开发板Flash按键控制电位，按下时D3为高电平，不按时为低电平</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(pinState </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> HIGH){</span><span style="color:#6A737D;">	//当按键引脚D3为高电平</span></span>
<span class="line"><span style="color:#E1E4E8;">    	</span><span style="color:#B392F0;">digitalWrite</span><span style="color:#E1E4E8;">(LED_BUILTIN,</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  	} </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span><span style="color:#6A737D;">	// 当按键引脚D3为低电平</span></span>
<span class="line"><span style="color:#E1E4E8;">    	</span><span style="color:#B392F0;">digitalWrite</span><span style="color:#E1E4E8;">(LED_BUILTIN,</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  	}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">sendHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Location&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">//发送Http相应代码303 跳转  </span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">303</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleLed</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//读取当前led的灯的状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">digitalRead</span><span style="color:#E1E4E8;">(LED_BUILTIN));</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//更改led灯的状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">digitalWrite</span><span style="color:#E1E4E8;">(LED_BUILTIN,</span><span style="color:#F97583;">!</span><span style="color:#B392F0;">digitalRead</span><span style="color:#E1E4E8;">(LED_BUILTIN));</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//跳转回页面根目录</span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">sendHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Location&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//发送Http相应代码303 跳转  </span></span>
<span class="line"><span style="color:#E1E4E8;">    esp8266_server.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">303</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handSend</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//更改led灯的状态</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">digitalWrite</span><span style="color:#E1E4E8;">(LED_BUILTIN,</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">//引入wifi库函数</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WebServer.h&gt;</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">//引入webserver库函数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">buttonPin</span><span style="color:#24292E;"> D3</span><span style="color:#6A737D;">            //引入按钮引脚D3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#D73A49;">bool</span><span style="color:#24292E;"> pinState;</span><span style="color:#6A737D;">  //存储引脚状态用变量</span></span>
<span class="line"><span style="color:#24292E;">ESP8266WebServer </span><span style="color:#6F42C1;">esp8266_server</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> 	//设置服务器暴露端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">pinMode</span><span style="color:#24292E;">(LED_BUILTIN, OUTPUT);</span><span style="color:#6A737D;"> //设置内置LED引脚为输出模式以便控制LED</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">	Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">         //启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;                             </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;连接到的网络为:&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(WiFi.</span><span style="color:#6F42C1;">SSID</span><span style="color:#24292E;">()); </span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;分配的ip为:&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(WiFi.</span><span style="color:#6F42C1;">localIP</span><span style="color:#24292E;">()); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//启动服务器</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//GET请求</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">, HTTP_GET ,handleRoot);	</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//GET请求</span></span>
<span class="line"><span style="color:#24292E;">	esp8266_server.</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/refresh&quot;</span><span style="color:#24292E;">, HTTP_POST ,handrefresh);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建post请求</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/led&quot;</span><span style="color:#24292E;">, HTTP_POST, handleLed);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建post请求</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">on</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/send&quot;</span><span style="color:#24292E;">, HTTP_GET, handSend);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//连接失败回调函数</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">onNotFound</span><span style="color:#24292E;">(handleNotFound); 		</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//监听http请求</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">handleClient</span><span style="color:#24292E;">();     </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//获取引脚状态</span></span>
<span class="line"><span style="color:#24292E;">    pinState </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">digitalRead</span><span style="color:#24292E;">(buttonPin); </span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleRoot</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//返回html</span></span>
<span class="line"><span style="color:#24292E;">	esp8266_server.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">200</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;text/html&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;&lt;form action=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">/led</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;"> method=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">POST</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">&gt;&lt;input type=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">submit</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;"> value=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">Toggle LED</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">&gt;&lt;/form&gt;&lt;form action=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">/refresh</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;"> method=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">POST</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">&gt;&lt;input type=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">submit</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;"> value=</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">REFRESH</span><span style="color:#005CC5;">\&quot;</span><span style="color:#032F62;">&gt;&lt;/form&gt;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleNotFound</span><span style="color:#24292E;">(){</span><span style="color:#6A737D;">	//失败回调函数</span></span>
<span class="line"><span style="color:#24292E;">	esp8266_server.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">404</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;text/plain&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;404: Not found&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handrefresh</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//开发板Flash按键控制电位，按下时D3为高电平，不按时为低电平</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(pinState </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> HIGH){</span><span style="color:#6A737D;">	//当按键引脚D3为高电平</span></span>
<span class="line"><span style="color:#24292E;">    	</span><span style="color:#6F42C1;">digitalWrite</span><span style="color:#24292E;">(LED_BUILTIN,</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  	} </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span><span style="color:#6A737D;">	// 当按键引脚D3为低电平</span></span>
<span class="line"><span style="color:#24292E;">    	</span><span style="color:#6F42C1;">digitalWrite</span><span style="color:#24292E;">(LED_BUILTIN,</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  	}</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">sendHeader</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Location&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">//发送Http相应代码303 跳转  </span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">303</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleLed</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//读取当前led的灯的状态</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">digitalRead</span><span style="color:#24292E;">(LED_BUILTIN));</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//更改led灯的状态</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">digitalWrite</span><span style="color:#24292E;">(LED_BUILTIN,</span><span style="color:#D73A49;">!</span><span style="color:#6F42C1;">digitalRead</span><span style="color:#24292E;">(LED_BUILTIN));</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//跳转回页面根目录</span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">sendHeader</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Location&quot;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//发送Http相应代码303 跳转  </span></span>
<span class="line"><span style="color:#24292E;">    esp8266_server.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">303</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handSend</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//更改led灯的状态</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">digitalWrite</span><span style="color:#24292E;">(LED_BUILTIN,</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h6 id="客户端" tabindex="-1">客户端 <a class="header-anchor" href="#客户端" aria-label="Permalink to &quot;客户端&quot;">​</a></h6><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFiMulti.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> host </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;192.168.1.3&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> httpPort </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络                            </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">wifiClientRequest</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">wifiClientRequest</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFiClient client;  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">//拼请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    String url </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/send&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    String httpRequest </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">String</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;GET &quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> url </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot; HTTP/1.1</span><span style="color:#79B8FF;">\r\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;Host: &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> host </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\r\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;Connection: close</span><span style="color:#79B8FF;">\r\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#79B8FF;">\r\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//连接服务器</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (client.</span><span style="color:#B392F0;">connect</span><span style="color:#E1E4E8;">(host, httpPort)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#E1E4E8;">        client.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(httpRequest);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//打印响应信息</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(httpRequest);  </span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; failed&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    client.</span><span style="color:#B392F0;">stop</span><span style="color:#E1E4E8;">();                         </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFiMulti.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> host </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;192.168.1.3&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> httpPort </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);</span><span style="color:#6A737D;">   //连接网络                            </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">wifiClientRequest</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">wifiClientRequest</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#24292E;">    WiFiClient client;  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">//拼请求</span></span>
<span class="line"><span style="color:#24292E;">    String url </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/send&quot;</span></span>
<span class="line"><span style="color:#24292E;">    String httpRequest </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">  </span><span style="color:#6F42C1;">String</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;GET &quot;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> url </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; HTTP/1.1</span><span style="color:#005CC5;">\r\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;Host: &quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> host </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\r\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;Connection: close</span><span style="color:#005CC5;">\r\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;</span><span style="color:#005CC5;">\r\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//连接服务器</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (client.</span><span style="color:#6F42C1;">connect</span><span style="color:#24292E;">(host, httpPort)) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#24292E;">        client.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(httpRequest);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//打印响应信息</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(httpRequest);  </span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; failed&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    client.</span><span style="color:#6F42C1;">stop</span><span style="color:#24292E;">();                         </span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h6 id="esp8266httpclient" tabindex="-1">ESP8266HTTPClient <a class="header-anchor" href="#esp8266httpclient" aria-label="Permalink to &quot;ESP8266HTTPClient&quot;">​</a></h6><ul><li>GET</li></ul><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266HTTPClient.h&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//连接网络</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);          </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> ((WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> WL_CONNECTED)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">http_get</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">http_get</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFiClient client;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建http对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    HTTPClient http;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//配置请求地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    http.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(client, </span><span style="color:#9ECBFF;">&quot;http://api.seniverse.com/v3/weather/now.json?key=SpciTJPArpECQAq0t&amp;location=Beijing&amp;language=en&amp;unit=c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> httpCode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> http.</span><span style="color:#B392F0;">GET</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//判断响应</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (httpCode </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> HTTP_CODE_OK) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        String responsePayload </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> http.</span><span style="color:#B392F0;">getString</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Server Response Payload: &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(responsePayload);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Server Respose Code：&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(httpCode);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    http.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266HTTPClient.h&gt;</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//连接网络</span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);          </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> ((WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> WL_CONNECTED)) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">http_get</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">http_get</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#24292E;">    WiFiClient client;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建http对象</span></span>
<span class="line"><span style="color:#24292E;">    HTTPClient http;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//配置请求地址</span></span>
<span class="line"><span style="color:#24292E;">    http.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(client, </span><span style="color:#032F62;">&quot;http://api.seniverse.com/v3/weather/now.json?key=SpciTJPArpECQAq0t&amp;location=Beijing&amp;language=en&amp;unit=c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> httpCode </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> http.</span><span style="color:#6F42C1;">GET</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//判断响应</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (httpCode </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> HTTP_CODE_OK) {</span></span>
<span class="line"><span style="color:#24292E;">        String responsePayload </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> http.</span><span style="color:#6F42C1;">getString</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Server Response Payload: &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(responsePayload);</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Server Respose Code：&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(httpCode);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    http.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>POST <a href="http://www.taichi-maker.com/homepage/iot-development/iot-dev-reference/esp8266-c-plus-plus-reference/esp8266httpclient/post/" target="_blank" rel="noreferrer">参考</a></li></ul><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266HTTPClient.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//连接网络</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);          </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> ((WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> WL_CONNECTED)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">http_post</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">http_post</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFiClient client;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建http对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    HTTPClient http;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//配置请求地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    http.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(client, </span><span style="color:#9ECBFF;">&quot;http://192.168.1.3:8081/posttest&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> httpCode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> http.</span><span style="color:#B392F0;">POST</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;this is Requestbody&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//连接失败时 httpCode时为负数</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (httpCode </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//打印响应头</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;[HTTP] POST... code: </span><span style="color:#79B8FF;">%d\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, httpCode);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">//响应信息判断</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (httpCode </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> HTTP_CODE_OK) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> String</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> payload </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> http.</span><span style="color:#B392F0;">getString</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">            Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;received payload:</span><span style="color:#79B8FF;">\n</span><span style="color:#9ECBFF;">&lt;&lt;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">            Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(payload);</span></span>
<span class="line"><span style="color:#E1E4E8;">            Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&gt;&gt;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">printf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;[HTTP] POST... failed, error: </span><span style="color:#79B8FF;">%s\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">, http.</span><span style="color:#B392F0;">errorToString</span><span style="color:#E1E4E8;">(httpCode).</span><span style="color:#B392F0;">c_str</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//关闭http连接</span></span>
<span class="line"><span style="color:#E1E4E8;">    http.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266HTTPClient.h&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//连接网络</span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);          </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> ((WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> WL_CONNECTED)) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">http_post</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">http_post</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#24292E;">    WiFiClient client;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建http对象</span></span>
<span class="line"><span style="color:#24292E;">    HTTPClient http;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//配置请求地址</span></span>
<span class="line"><span style="color:#24292E;">    http.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(client, </span><span style="color:#032F62;">&quot;http://192.168.1.3:8081/posttest&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> httpCode </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> http.</span><span style="color:#6F42C1;">POST</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;this is Requestbody&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//连接失败时 httpCode时为负数</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (httpCode </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//打印响应头</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;[HTTP] POST... code: </span><span style="color:#005CC5;">%d\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, httpCode);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">//响应信息判断</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (httpCode </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> HTTP_CODE_OK) {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> String</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> payload </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> http.</span><span style="color:#6F42C1;">getString</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">            Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;received payload:</span><span style="color:#005CC5;">\n</span><span style="color:#032F62;">&lt;&lt;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">            Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(payload);</span></span>
<span class="line"><span style="color:#24292E;">            Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&gt;&gt;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">printf</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;[HTTP] POST... failed, error: </span><span style="color:#005CC5;">%s\n</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, http.</span><span style="color:#6F42C1;">errorToString</span><span style="color:#24292E;">(httpCode).</span><span style="color:#6F42C1;">c_str</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//关闭http连接</span></span>
<span class="line"><span style="color:#24292E;">    http.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h5 id="_4-闪存文件" tabindex="-1">4.闪存文件 <a class="header-anchor" href="#_4-闪存文件" aria-label="Permalink to &quot;4.闪存文件&quot;">​</a></h5><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;FS.h&gt;</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//创建文件夹目录</span></span>
<span class="line"><span style="color:#E1E4E8;">String folder_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/source&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">//设置文件路径</span></span>
<span class="line"><span style="color:#E1E4E8;">String file_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/source/test.txt&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">String d_file_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/source/delete.txt&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  	Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  	Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//格式化闪存</span></span>
<span class="line"><span style="color:#E1E4E8;">  	SPIFFS.</span><span style="color:#B392F0;">format</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(SPIFFS.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">()){</span><span style="color:#6A737D;"> // 启动SPIFFS</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;SPIFFS Started.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;SPIFFS Failed to Start.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//建立文件夹目录</span></span>
<span class="line"><span style="color:#E1E4E8;">    Dir dir </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SPIFFS.</span><span style="color:#B392F0;">openDir</span><span style="color:#E1E4E8;">(folder_name);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//打印该目录的所有文件名</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (dir.</span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(dir.</span><span style="color:#B392F0;">fileName</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//删除文件</span></span>
<span class="line"><span style="color:#E1E4E8;">    SPIFFS.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(d_file_name)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//打开文件流</span></span>
<span class="line"><span style="color:#E1E4E8;">    File dataFileWrite </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SPIFFS.</span><span style="color:#B392F0;">open</span><span style="color:#E1E4E8;">(file_name, </span><span style="color:#9ECBFF;">&quot;w&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//写入数据</span></span>
<span class="line"><span style="color:#E1E4E8;">    dataFileWrite.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hello World&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//关闭文件流</span></span>
<span class="line"><span style="color:#E1E4E8;">    dataFileWrite.</span><span style="color:#B392F0;">close</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//确认闪存中是否有file_name文件</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (SPIFFS.</span><span style="color:#B392F0;">exists</span><span style="color:#E1E4E8;">(file_name)){</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(file_name);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; FOUND.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(file_name);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; NOT FOUND.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//打开文件流</span></span>
<span class="line"><span style="color:#E1E4E8;">    File dataFileRead </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> SPIFFS.</span><span style="color:#B392F0;">open</span><span style="color:#E1E4E8;">(file_name, </span><span style="color:#9ECBFF;">&quot;r&quot;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//读取文件内容并且通过串口监视器输出文件信息</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> i</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">; i</span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">dataFileRead.</span><span style="color:#B392F0;">size</span><span style="color:#E1E4E8;">(); i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">((</span><span style="color:#F97583;">char</span><span style="color:#E1E4E8;">)dataFileRead.</span><span style="color:#B392F0;">read</span><span style="color:#E1E4E8;">());       </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//关闭文件流</span></span>
<span class="line"><span style="color:#E1E4E8;">    dataFileRead.</span><span style="color:#B392F0;">close</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//追加信息</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//File dataFile = SPIFFS.open(file_name, &quot;a&quot;);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;FS.h&gt;</span><span style="color:#24292E;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//创建文件夹目录</span></span>
<span class="line"><span style="color:#24292E;">String folder_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/source&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">//设置文件路径</span></span>
<span class="line"><span style="color:#24292E;">String file_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/source/test.txt&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">String d_file_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/source/delete.txt&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  	Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  	Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//格式化闪存</span></span>
<span class="line"><span style="color:#24292E;">  	SPIFFS.</span><span style="color:#6F42C1;">format</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(SPIFFS.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">()){</span><span style="color:#6A737D;"> // 启动SPIFFS</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;SPIFFS Started.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;SPIFFS Failed to Start.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//建立文件夹目录</span></span>
<span class="line"><span style="color:#24292E;">    Dir dir </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> SPIFFS.</span><span style="color:#6F42C1;">openDir</span><span style="color:#24292E;">(folder_name);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//打印该目录的所有文件名</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (dir.</span><span style="color:#6F42C1;">next</span><span style="color:#24292E;">()) {</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(dir.</span><span style="color:#6F42C1;">fileName</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//删除文件</span></span>
<span class="line"><span style="color:#24292E;">    SPIFFS.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(d_file_name)</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//打开文件流</span></span>
<span class="line"><span style="color:#24292E;">    File dataFileWrite </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> SPIFFS.</span><span style="color:#6F42C1;">open</span><span style="color:#24292E;">(file_name, </span><span style="color:#032F62;">&quot;w&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//写入数据</span></span>
<span class="line"><span style="color:#24292E;">    dataFileWrite.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hello World&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//关闭文件流</span></span>
<span class="line"><span style="color:#24292E;">    dataFileWrite.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//确认闪存中是否有file_name文件</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (SPIFFS.</span><span style="color:#6F42C1;">exists</span><span style="color:#24292E;">(file_name)){</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(file_name);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; FOUND.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(file_name);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; NOT FOUND.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//打开文件流</span></span>
<span class="line"><span style="color:#24292E;">    File dataFileRead </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> SPIFFS.</span><span style="color:#6F42C1;">open</span><span style="color:#24292E;">(file_name, </span><span style="color:#032F62;">&quot;r&quot;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//读取文件内容并且通过串口监视器输出文件信息</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> i</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; i</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">dataFileRead.</span><span style="color:#6F42C1;">size</span><span style="color:#24292E;">(); i</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">((</span><span style="color:#D73A49;">char</span><span style="color:#24292E;">)dataFileRead.</span><span style="color:#6F42C1;">read</span><span style="color:#24292E;">());       </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//关闭文件流</span></span>
<span class="line"><span style="color:#24292E;">    dataFileRead.</span><span style="color:#6F42C1;">close</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//追加信息</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//File dataFile = SPIFFS.open(file_name, &quot;a&quot;);</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h5 id="_5-oled" tabindex="-1">5.OLED <a class="header-anchor" href="#_5-oled" aria-label="Permalink to &quot;5.OLED&quot;">​</a></h5><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;SPI.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Wire.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">char</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">temp</span><span style="color:#E1E4E8;">[</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">]</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&#39;b&#39;</span><span style="color:#E1E4E8;">,</span><span style="color:#9ECBFF;">&#39;c&#39;</span><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#E1E4E8;">Adafruit_SSD1306 display </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Adafruit_SSD1306</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">128</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">&amp;</span><span style="color:#FFAB70;">Wire</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">115200</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;OLED FeatherWing test&quot;</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 串口输出</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">3C</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">clearDisplay</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> // 清空屏幕</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setTextSize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置字体大小</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setTextColor</span><span style="color:#E1E4E8;">(SSD1306_WHITE);</span><span style="color:#6A737D;"> // 设置字体颜色</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setCursor</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置开始显示文字的坐标</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hello World!&quot;</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 输出的字符</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">display</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> // 使更改的显示生效</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;SPI.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Wire.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">char</span><span style="color:#24292E;"> </span><span style="color:#E36209;">temp</span><span style="color:#24292E;">[</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;b&#39;</span><span style="color:#24292E;">,</span><span style="color:#032F62;">&#39;c&#39;</span><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#24292E;">Adafruit_SSD1306 display </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Adafruit_SSD1306</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">128</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">&amp;</span><span style="color:#E36209;">Wire</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">115200</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;OLED FeatherWing test&quot;</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 串口输出</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">3C</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">clearDisplay</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> // 清空屏幕</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setTextSize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置字体大小</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setTextColor</span><span style="color:#24292E;">(SSD1306_WHITE);</span><span style="color:#6A737D;"> // 设置字体颜色</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setCursor</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置开始显示文字的坐标</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hello World!&quot;</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 输出的字符</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">display</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> // 使更改的显示生效</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {}</span></span></code></pre></div><h5 id="_6-心知天气" tabindex="-1">6.心知天气 <a class="header-anchor" href="#_6-心知天气" aria-label="Permalink to &quot;6.心知天气&quot;">​</a></h5><div class="language-C vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">C</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ESP8266HTTPClient.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;ArduinoJson.h&gt;</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;SPI.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Wire.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> ssidIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ChinaNet-aemM&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> passwordIn </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;wp907678446&quot;</span><span style="color:#E1E4E8;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#E1E4E8;">Adafruit_SSD1306 display </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Adafruit_SSD1306</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">128</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">&amp;</span><span style="color:#FFAB70;">Wire</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//连接网络</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFi.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(ssidIn, passwordIn);          </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">!=</span><span style="color:#E1E4E8;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;等待网络连接&#39;</span><span style="color:#E1E4E8;">); </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);                  </span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">115200</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">3C</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> ((WiFi.</span><span style="color:#B392F0;">status</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> WL_CONNECTED)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">http_get</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">http_get</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#E1E4E8;">    WiFiClient client;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//创建http对象</span></span>
<span class="line"><span style="color:#E1E4E8;">    HTTPClient http;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//配置请求地址</span></span>
<span class="line"><span style="color:#E1E4E8;">    http.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(client, </span><span style="color:#9ECBFF;">&quot;http://api.seniverse.com/v3/weather/now.json?key=SpciTJPArpECQAq0t&amp;location=ChongQing&amp;language=en&amp;unit=c&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> httpCode </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> http.</span><span style="color:#B392F0;">GET</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//判断响应</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (httpCode </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> HTTP_CODE_OK) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        String responsePayload </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> http.</span><span style="color:#B392F0;">getString</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">size_t</span><span style="color:#E1E4E8;"> capacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_ARRAY_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_OBJECT_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#F97583;">*</span><span style="color:#B392F0;">JSON_OBJECT_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">JSON_OBJECT_SIZE</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">230</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        DynamicJsonBuffer </span><span style="color:#B392F0;">jsonBuffer</span><span style="color:#E1E4E8;">(capacity);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> json </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> responsePayload.</span><span style="color:#B392F0;">c_str</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        JsonObject</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> root </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> jsonBuffer.</span><span style="color:#B392F0;">parseObject</span><span style="color:#E1E4E8;">(json);</span></span>
<span class="line"><span style="color:#E1E4E8;">        JsonObject</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> results_0 </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">root</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;results&quot;</span><span style="color:#E1E4E8;">][</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        JsonObject</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> results_0_location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;location&quot;</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_location_id </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_location</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;id&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;WX4FBXXFKE4F&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_location_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_location</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;name&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;Beijing&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_location_country </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_location</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;country&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;CN&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_location_path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_location</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;path&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;Beijing,Beijing,China&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_location_timezone </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_location</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;timezone&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;Asia/Shanghai&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_location_timezone_offset </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_location</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;timezone_offset&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;+08:00&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        JsonObject</span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;"> results_0_now </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;now&quot;</span><span style="color:#E1E4E8;">];</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_now_text </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_now</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;Sunny&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_now_code </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_now</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;code&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;0&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_now_temperature </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0_now</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;temperature&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;24&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">char*</span><span style="color:#E1E4E8;"> results_0_last_update </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">results_0</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;last_update&quot;</span><span style="color:#E1E4E8;">];</span><span style="color:#6A737D;"> // &quot;2022-05-03T12:00:49+08:00&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;====================================&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(results_0_now_text);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(results_0_now_temperature);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(results_0_last_update);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;====================================&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">115200</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;OLED FeatherWing test&quot;</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 串口输出</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">3C</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">clearDisplay</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> // 清空屏幕</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">setTextSize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1.5</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置字体大小</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">setTextColor</span><span style="color:#E1E4E8;">(SSD1306_WHITE);</span><span style="color:#6A737D;"> // 设置字体颜色</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">setCursor</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置开始显示文字的坐标</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hello World!&quot;</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 输出的字符</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Weather:   &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(results_0_now_text);</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Temperature:   &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(results_0_now_temperature);</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Time:   &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(results_0_last_update);</span></span>
<span class="line"><span style="color:#E1E4E8;">        display.</span><span style="color:#B392F0;">display</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> // 使更改的显示生效</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Server Respose Code：&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        Serial.</span><span style="color:#B392F0;">println</span><span style="color:#E1E4E8;">(httpCode);</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    http.</span><span style="color:#B392F0;">end</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266WiFi.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ESP8266HTTPClient.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;ArduinoJson.h&gt;</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;SPI.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Wire.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> ssidIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ChinaNet-aemM&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;">   //定义用户名</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> passwordIn </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;wp907678446&quot;</span><span style="color:#24292E;">;</span><span style="color:#6A737D;"> //定义密码</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#24292E;">Adafruit_SSD1306 display </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Adafruit_SSD1306</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">128</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">&amp;</span><span style="color:#E36209;">Wire</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//启动串口通讯</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//连接网络</span></span>
<span class="line"><span style="color:#24292E;">    WiFi.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(ssidIn, passwordIn);          </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> (WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">!=</span><span style="color:#24292E;"> WL_CONNECTED) {</span></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;等待网络连接&#39;</span><span style="color:#24292E;">); </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);                  </span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">115200</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">3C</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> ((WiFi.</span><span style="color:#6F42C1;">status</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> WL_CONNECTED)) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">http_get</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">http_get</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建client</span></span>
<span class="line"><span style="color:#24292E;">    WiFiClient client;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//创建http对象</span></span>
<span class="line"><span style="color:#24292E;">    HTTPClient http;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//配置请求地址</span></span>
<span class="line"><span style="color:#24292E;">    http.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(client, </span><span style="color:#032F62;">&quot;http://api.seniverse.com/v3/weather/now.json?key=SpciTJPArpECQAq0t&amp;location=ChongQing&amp;language=en&amp;unit=c&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//发送请求</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> httpCode </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> http.</span><span style="color:#6F42C1;">GET</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//判断响应</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (httpCode </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> HTTP_CODE_OK) {</span></span>
<span class="line"><span style="color:#24292E;">        String responsePayload </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> http.</span><span style="color:#6F42C1;">getString</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">size_t</span><span style="color:#24292E;"> capacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_ARRAY_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_OBJECT_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#D73A49;">*</span><span style="color:#6F42C1;">JSON_OBJECT_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">JSON_OBJECT_SIZE</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">6</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">230</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        DynamicJsonBuffer </span><span style="color:#6F42C1;">jsonBuffer</span><span style="color:#24292E;">(capacity);</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> json </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> responsePayload.</span><span style="color:#6F42C1;">c_str</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        JsonObject</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> root </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> jsonBuffer.</span><span style="color:#6F42C1;">parseObject</span><span style="color:#24292E;">(json);</span></span>
<span class="line"><span style="color:#24292E;">        JsonObject</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> results_0 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">root</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;results&quot;</span><span style="color:#24292E;">][</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">        </span></span>
<span class="line"><span style="color:#24292E;">        JsonObject</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> results_0_location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;location&quot;</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_location_id </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_location</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;id&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;WX4FBXXFKE4F&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_location_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_location</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;name&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;Beijing&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_location_country </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_location</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;country&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;CN&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_location_path </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_location</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;path&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;Beijing,Beijing,China&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_location_timezone </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_location</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;timezone&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;Asia/Shanghai&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_location_timezone_offset </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_location</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;timezone_offset&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;+08:00&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span></span>
<span class="line"><span style="color:#24292E;">        JsonObject</span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;"> results_0_now </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;now&quot;</span><span style="color:#24292E;">];</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_now_text </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_now</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;Sunny&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_now_code </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_now</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;code&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;0&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_now_temperature </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0_now</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;temperature&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;24&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">char*</span><span style="color:#24292E;"> results_0_last_update </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#E36209;">results_0</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;last_update&quot;</span><span style="color:#24292E;">];</span><span style="color:#6A737D;"> // &quot;2022-05-03T12:00:49+08:00&quot;</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;====================================&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(results_0_now_text);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(results_0_now_temperature);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(results_0_last_update);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;====================================&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">115200</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;OLED FeatherWing test&quot;</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 串口输出</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">3C</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">clearDisplay</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> // 清空屏幕</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">setTextSize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1.5</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置字体大小</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">setTextColor</span><span style="color:#24292E;">(SSD1306_WHITE);</span><span style="color:#6A737D;"> // 设置字体颜色</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">setCursor</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置开始显示文字的坐标</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hello World!&quot;</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 输出的字符</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Weather:   &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(results_0_now_text);</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Temperature:   &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(results_0_now_temperature);</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Time:   &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(results_0_last_update);</span></span>
<span class="line"><span style="color:#24292E;">        display.</span><span style="color:#6F42C1;">display</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> // 使更改的显示生效</span></span>
<span class="line"><span style="color:#24292E;">        </span></span>
<span class="line"><span style="color:#24292E;">        </span></span>
<span class="line"><span style="color:#24292E;">    } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Server Respose Code：&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        Serial.</span><span style="color:#6F42C1;">println</span><span style="color:#24292E;">(httpCode);</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    http.</span><span style="color:#6F42C1;">end</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h5 id="_7-汉字显示" tabindex="-1">7.汉字显示 <a class="header-anchor" href="#_7-汉字显示" aria-label="Permalink to &quot;7.汉字显示&quot;">​</a></h5><ul><li>test.h</li></ul><div class="language-h vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">h</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM hans_wen[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x02,0x00,0x01,0x00,0x01,0x00,0xFF,0xFE,0x10,0x10,0x10,0x10,0x08,0x20,0x08,0x20,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x04,0x40,0x02,0x80,0x01,0x00,0x02,0x80,0x04,0x40,0x08,0x20,0x30,0x18,0xC0,0x06,/*&quot;文&quot;,0*/</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM hans_peng[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x10,0x77,0x20,0x55,0x7C,0x55,0x44,0x55,0x64,0x77,0x54,0x55,0x44,0x55,0x4C,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x55,0x40,0x77,0x7E,0x55,0x02,0x55,0x02,0x55,0x7A,0xB5,0x02,0x89,0x0A,0x13,0x04,/*&quot;鹏&quot;,1*/</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM hans_xiao[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x11,0x10,0x11,0x08,0x11,0x04,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x21,0x04,0x21,0x02,0x41,0x02,0x81,0x02,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00,/*&quot;小&quot;,2*/</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM hans_pang[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x20,0x3C,0x20,0x25,0x24,0x24,0xA4,0x24,0xA8,0x3C,0x20,0x25,0xFC,0x24,0x20,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x24,0x20,0x3C,0x20,0x27,0xFE,0x24,0x20,0x24,0x20,0x44,0x20,0x54,0x20,0x88,0x20,/*&quot;胖&quot;,3*/</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM hans_zi[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x00,0x7F,0xF8,0x00,0x10,0x00,0x20,0x00,0x40,0x01,0x80,0x01,0x00,0xFF,0xFE,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00,/*&quot;子&quot;,4*/</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM hans_wen[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0x02,0x00,0x01,0x00,0x01,0x00,0xFF,0xFE,0x10,0x10,0x10,0x10,0x08,0x20,0x08,0x20,</span></span>
<span class="line"><span style="color:#24292e;">	0x04,0x40,0x02,0x80,0x01,0x00,0x02,0x80,0x04,0x40,0x08,0x20,0x30,0x18,0xC0,0x06,/*&quot;文&quot;,0*/</span></span>
<span class="line"><span style="color:#24292e;">};</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM hans_peng[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x10,0x77,0x20,0x55,0x7C,0x55,0x44,0x55,0x64,0x77,0x54,0x55,0x44,0x55,0x4C,</span></span>
<span class="line"><span style="color:#24292e;">	0x55,0x40,0x77,0x7E,0x55,0x02,0x55,0x02,0x55,0x7A,0xB5,0x02,0x89,0x0A,0x13,0x04,/*&quot;鹏&quot;,1*/</span></span>
<span class="line"><span style="color:#24292e;">};</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM hans_xiao[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x11,0x10,0x11,0x08,0x11,0x04,</span></span>
<span class="line"><span style="color:#24292e;">	0x21,0x04,0x21,0x02,0x41,0x02,0x81,0x02,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00,/*&quot;小&quot;,2*/</span></span>
<span class="line"><span style="color:#24292e;">};</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM hans_pang[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x20,0x3C,0x20,0x25,0x24,0x24,0xA4,0x24,0xA8,0x3C,0x20,0x25,0xFC,0x24,0x20,</span></span>
<span class="line"><span style="color:#24292e;">	0x24,0x20,0x3C,0x20,0x27,0xFE,0x24,0x20,0x24,0x20,0x44,0x20,0x54,0x20,0x88,0x20,/*&quot;胖&quot;,3*/</span></span>
<span class="line"><span style="color:#24292e;">};</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM hans_zi[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x00,0x7F,0xF8,0x00,0x10,0x00,0x20,0x00,0x40,0x01,0x80,0x01,0x00,0xFF,0xFE,</span></span>
<span class="line"><span style="color:#24292e;">	0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00,/*&quot;子&quot;,4*/</span></span>
<span class="line"><span style="color:#24292e;">};</span></span></code></pre></div><ul><li>代码</li></ul><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;SPI.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Wire.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;test.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#E1E4E8;">Adafruit_SSD1306 display </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Adafruit_SSD1306</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">128</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">&amp;</span><span style="color:#FFAB70;">Wire</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">115200</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">3C</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">hans_display</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">display_test</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">clearDisplay</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> // 清空屏幕</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setTextSize</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1.5</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置字体大小</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setTextColor</span><span style="color:#E1E4E8;">(SSD1306_WHITE);</span><span style="color:#6A737D;"> // 设置字体颜色</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setCursor</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置开始显示文字的坐标</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Hello World!&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setCursor</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;time: &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//打印自开发板重置以来的秒数：</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">millis</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; s&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">setCursor</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">40</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Author: &quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Dapenson&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">display</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;"> // 使更改的显示生效</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hans_display</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 显示之前清屏</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">clearDisplay</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 显示文字 (左上角x坐标,左上角y坐标, 图形数组, 图形宽度像素点, 图形高度像素点, 设置颜色)</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, hans_wen, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, hans_peng, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, hans_xiao, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, hans_pang, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, hans_zi, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//显示图形</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">display</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;SPI.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Wire.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;test.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#24292E;">Adafruit_SSD1306 display </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Adafruit_SSD1306</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">128</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">&amp;</span><span style="color:#E36209;">Wire</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">115200</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">3C</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">hans_display</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">display_test</span><span style="color:#24292E;">(){</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">clearDisplay</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> // 清空屏幕</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setTextSize</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1.5</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置字体大小</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setTextColor</span><span style="color:#24292E;">(SSD1306_WHITE);</span><span style="color:#6A737D;"> // 设置字体颜色</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setCursor</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置开始显示文字的坐标</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Hello World!&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setCursor</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;time: &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//打印自开发板重置以来的秒数：</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">millis</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; s&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">setCursor</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">40</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Author: &quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Dapenson&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">display</span><span style="color:#24292E;">();</span><span style="color:#6A737D;"> // 使更改的显示生效</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">hans_display</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 显示之前清屏</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">clearDisplay</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 显示文字 (左上角x坐标,左上角y坐标, 图形数组, 图形宽度像素点, 图形高度像素点, 设置颜色)</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, hans_wen, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, hans_peng, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, hans_xiao, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, hans_pang, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, hans_zi, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">16</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//显示图形</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">display</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h5 id="_8-图片显示" tabindex="-1">8.图片显示 <a class="header-anchor" href="#_8-图片显示" aria-label="Permalink to &quot;8.图片显示&quot;">​</a></h5><div class="language-h vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">h</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM boy[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0x0F,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF0,0xFF,0xFF,0xFE,0x01,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFE,0x3F,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0x01,0xFF,0xF0,0xFF,0xFF,0xFE,0x3B,0xFF,0xF8,0x03,0x87,0xF0,0xFD,0xFF,0xFE,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xC0,0x01,0xCF,0xF0,0xFF,0xFF,0xFC,0xF8,0xFC,0x00,0x07,0xFF,0xF0,0xEE,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xC0,0xE0,0x00,0x7F,0xFF,0xF0,0xF0,0xE9,0xFF,0xF0,0x00,0x01,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF0,0xFC,0xE3,0xFF,0xC0,0x00,0x01,0xFF,0xFF,0xF0,0xFD,0x2F,0xFF,0x80,0x00,0x03,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xF0,0xFC,0x10,0xFF,0xE0,0x00,0x07,0xFF,0xFF,0xF0,0xFE,0x2D,0xFF,0x80,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x0F,0xFF,0xFF,0xF0,0xFF,0x65,0xFF,0xC0,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,0xE7,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xC0,0x00,0x3F,0xFF,0xFF,0xF0,0xFF,0x83,0xFF,0x80,0x00,0x3F,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0x97,0xFF,0x00,0x00,0x3F,0xFF,0xFF,0xF0,0xFF,0x8F,0xFE,0x00,0x00,0x3F,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF0,0xFF,0xDF,0xFE,0x70,0x00,0x3F,0xFF,0xFF,0xF0,0xFD,0xFF,0xEF,0xF8,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x3F,0xFF,0xFF,0xF0,0xFD,0xFF,0xFB,0xFC,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,0xBF,0xA1,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xC4,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,0xBF,0xF0,0xF0,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x9F,0xF0,0x00,0x00,0x1F,0xFF,0xFF,0xF0,0xFF,0x03,0xD0,0x00,0x00,0x0F,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF0,0xFF,0x01,0x62,0x00,0x00,0x0F,0xFF,0xFF,0xF0,0xFF,0x80,0x07,0x00,0x00,0x07,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xF0,0xFF,0xC0,0x0F,0x00,0x00,0x03,0xFF,0xFF,0xF0,0xFB,0xE0,0x3F,0x80,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x03,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xC0,0x00,0x01,0xFF,0xFF,0xF0,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xC0,0x00,0x03,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xC0,0x00,0x03,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0xC0,0x00,0x01,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xE0,0x00,0x01,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF0,0xFF,0xFF,0xFF,0xE1,0xFE,0x00,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xE7,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xC0,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xEF,0xFF,0xF8,0x7F,0xFF,0xF0,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xDF,0xF3,0xFC,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0xC8,0x3F,0xFF,0xFF,0xF0,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0xF0,0x7F,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0x87,0x2F,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF0,0xFF,0xFF,0xFF,0xFF,0xCF,0xBF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0x1F,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xEF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFE,0x3F,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x7F,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xF8,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF1,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xE3,0xFF,0xFF,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0x87,0xFF,0xFE,0xFF,0xFF,0xF0,0xFF,0xFF,0xFE,0x0F,0xFF,0xFF,0xFD,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF0,0xFF,0xFF,0xFC,0x1F,0xFF,0xFF,0x71,0xFF,0xF0,0xFF,0xFF,0xF8,0x3F,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xD1,0xFF,0xF0,0xFF,0xFF,0xF0,0x3F,0xFF,0xFF,0xF9,0xFF,0xF0,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x7F,0xFF,0xFF,0xF9,0xFF,0xF0,0xFF,0xFF,0xE9,0xFF,0xFF,0xFF,0xF9,0xFF,0xF0,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF9,0xFF,0xFF,0xFF,0xF8,0xFF,0xF0,0xFF,0xFF,0xF3,0xFF,0xFF,0xFF,0xFC,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF0,0xFF,0xFF,0xC7,0xFF,0xFF,0xFF,0xFC,0x7F,0xF0,0xFF,0xFD,0x8F,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFC,0xFF,0xF0,0xFF,0xFD,0x0F,0xFF,0xFF,0xFF,0xEC,0xFF,0xF0,0xFF,0xF8,0x7F,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFC,0xFF,0xF0,0xFF,0xFC,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xF0,0xFF,0xF8,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0xFF,0xF0,0x7F,0xF0,0xFF,0xFC,0xFF,0xFF,0xFF,0xFF,0xF0,0x7F,0xF0,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0xF7,0xBF,0xF0,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0xF7,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xF0,0xFF,0x00,0x7F,0xFF,0xFF,0xFF,0xF7,0x9F,0xF0,0xFF,0x00,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x01,0xFB,0x80,0x30,0xFF,0xFF,0xFF,0xFF,0x1F,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">static const unsigned char PROGMEM girl[] = {</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xFF,0xFC,0x01,0xFF,0xFF,0xFC,0xFF,0xC0,0x00,0x7F,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0xFC,0xFF,0x80,0x00,0x1F,0xFF,0xFC,0xFE,0x00,0x00,0x0F,0xFF,0xFC,0xFE,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x03,0xFF,0xFC,0xFC,0x00,0x00,0x01,0xFF,0xFC,0xF8,0x00,0x00,0x01,0xFF,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF8,0x00,0x00,0x00,0xFF,0xFC,0xF0,0x00,0x00,0x00,0xFF,0xFC,0xF8,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x7F,0xFC,0xF8,0x00,0x00,0x00,0x7F,0xFC,0xE0,0x00,0x00,0x00,0x7F,0xFC,0xE0,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x00,0xFF,0xFC,0xF0,0x00,0x00,0x00,0x7F,0xFC,0xF0,0x00,0x08,0x00,0x3F,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF0,0x00,0x18,0x00,0x3F,0xFC,0xE0,0x00,0x10,0x0F,0x3F,0xFC,0xE0,0x00,0x34,0x7F,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x3F,0xFC,0xE0,0x00,0x3F,0xFF,0x3F,0xFC,0xE0,0x00,0x3F,0x0F,0xBF,0xFC,0xE0,0x10,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x3F,0xFF,0x9F,0xFC,0xE0,0x30,0x3F,0xFF,0xDF,0xFC,0xE0,0x38,0x7F,0xFF,0xDF,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xC0,0x3C,0x7F,0xFF,0xFF,0xFC,0xC0,0x3C,0x7F,0xFF,0x9F,0xFC,0xC0,0x1C,0x7F,0xFF,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x9F,0xFC,0xC0,0x04,0x3F,0xFC,0x1F,0xFC,0xC0,0x00,0x3F,0xFF,0x1F,0xFC,0xC0,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x7F,0xFF,0x1F,0xFC,0xC0,0x00,0x7F,0xFF,0x1F,0xFC,0x80,0x00,0x7F,0xFF,0x1F,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x80,0x00,0x7C,0x7E,0x1F,0xFC,0x80,0x00,0x7E,0x00,0x9F,0xFC,0x80,0x00,0xFE,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x3F,0xFC,0x80,0x00,0xC0,0x30,0xFF,0xFC,0xC0,0x00,0x00,0x27,0xFF,0xFC,0xC0,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x1F,0xED,0xFF,0xFC,0xF0,0x00,0x1E,0x2F,0xFF,0xB4,0xF8,0x00,0x42,0x05,0xFE,0x4C,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFC,0x40,0x3C,0x00,0xF8,0x1C,0xFF,0xF0,0x78,0x00,0x78,0x1C,0xFF,0xF2,0x78,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x78,0xBC,0xFF,0xF0,0xF0,0x00,0x3C,0xBC,0xFF,0xE3,0xE0,0x00,0x3F,0x9C,0xFF,0xEB,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xC0,0x00,0x1F,0xFC,0xFF,0xE7,0x80,0x00,0x1F,0xFC,0xFF,0xDF,0x00,0x00,0x1F,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFF,0x5C,0x00,0x00,0x1F,0xFC,0xFF,0x70,0x00,0x00,0x1F,0xFC,0xFE,0xC4,0x00,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x1F,0xFC,0xFE,0x90,0x00,0x00,0x1F,0xFC,0xFC,0x60,0x00,0x00,0x0F,0xFC,0xFC,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x00,0x1B,0xFC,0xFC,0x00,0x00,0x00,0x13,0xFC,0xF8,0x00,0x00,0x00,0x13,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xF8,0x00,0x00,0x00,0x01,0xFC,0xF8,0x00,0x00,0x00,0x00,0xFC,0xF8,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0xFC,0xF8,0x00,0x00,0x00,0x00,0xFC,0xFC,0x00,0x00,0x00,0x00,0xFC,0xFC,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x00,0x00,0xFC,0xFE,0x00,0x00,0x00,0x00,0xFC,0xFE,0x00,0x00,0x00,0x00,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0xFE,0x00,0x00,0x00,0x01,0xFC,0xFF,0x00,0x00,0x00,0x01,0xFC,0xFF,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x03,0xFC,0xFF,0x00,0x00,0x00,0x03,0xFC,0xFF,0x00,0x00,0x00,0x07,0xFC,0xFF,0x80,</span></span>
<span class="line"><span style="color:#e1e4e8;">	0x00,0x00,0x07,0xFC,</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM boy[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0x0F,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF0,0xFF,0xFF,0xFE,0x01,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFE,0x3F,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0x01,0xFF,0xF0,0xFF,0xFF,0xFE,0x3B,0xFF,0xF8,0x03,0x87,0xF0,0xFD,0xFF,0xFE,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xC0,0x01,0xCF,0xF0,0xFF,0xFF,0xFC,0xF8,0xFC,0x00,0x07,0xFF,0xF0,0xEE,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xC0,0xE0,0x00,0x7F,0xFF,0xF0,0xF0,0xE9,0xFF,0xF0,0x00,0x01,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xF0,0xFC,0xE3,0xFF,0xC0,0x00,0x01,0xFF,0xFF,0xF0,0xFD,0x2F,0xFF,0x80,0x00,0x03,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xF0,0xFC,0x10,0xFF,0xE0,0x00,0x07,0xFF,0xFF,0xF0,0xFE,0x2D,0xFF,0x80,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x0F,0xFF,0xFF,0xF0,0xFF,0x65,0xFF,0xC0,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,0xE7,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xC0,0x00,0x3F,0xFF,0xFF,0xF0,0xFF,0x83,0xFF,0x80,0x00,0x3F,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0x97,0xFF,0x00,0x00,0x3F,0xFF,0xFF,0xF0,0xFF,0x8F,0xFE,0x00,0x00,0x3F,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF0,0xFF,0xDF,0xFE,0x70,0x00,0x3F,0xFF,0xFF,0xF0,0xFD,0xFF,0xEF,0xF8,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x3F,0xFF,0xFF,0xF0,0xFD,0xFF,0xFB,0xFC,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,0xBF,0xA1,</span></span>
<span class="line"><span style="color:#24292e;">	0xC4,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,0xBF,0xF0,0xF0,0x00,0x1F,0xFF,0xFF,0xF0,0xFD,</span></span>
<span class="line"><span style="color:#24292e;">	0x9F,0xF0,0x00,0x00,0x1F,0xFF,0xFF,0xF0,0xFF,0x03,0xD0,0x00,0x00,0x0F,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xF0,0xFF,0x01,0x62,0x00,0x00,0x0F,0xFF,0xFF,0xF0,0xFF,0x80,0x07,0x00,0x00,0x07,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xF0,0xFF,0xC0,0x0F,0x00,0x00,0x03,0xFF,0xFF,0xF0,0xFB,0xE0,0x3F,0x80,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x03,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xC0,0x00,0x01,0xFF,0xFF,0xF0,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xC0,0x00,0x03,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xC0,0x00,0x03,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0xC0,0x00,0x01,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xE0,0x00,0x01,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF0,0xFF,0xFF,0xFF,0xE1,0xFE,0x00,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xE7,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xC0,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xEF,0xFF,0xF8,0x7F,0xFF,0xF0,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xDF,0xF3,0xFC,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0xC8,0x3F,0xFF,0xFF,0xF0,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0xF0,0x7F,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0x87,0x2F,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xF0,0xFF,0xFF,0xFF,0xFF,0xCF,0xBF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0x1F,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xEF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFE,0x3F,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0x7F,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xF8,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF1,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,0xE3,0xFF,0xFF,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0x87,0xFF,0xFE,0xFF,0xFF,0xF0,0xFF,0xFF,0xFE,0x0F,0xFF,0xFF,0xFD,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF0,0xFF,0xFF,0xFC,0x1F,0xFF,0xFF,0x71,0xFF,0xF0,0xFF,0xFF,0xF8,0x3F,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xD1,0xFF,0xF0,0xFF,0xFF,0xF0,0x3F,0xFF,0xFF,0xF9,0xFF,0xF0,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#24292e;">	0x7F,0xFF,0xFF,0xF9,0xFF,0xF0,0xFF,0xFF,0xE9,0xFF,0xFF,0xFF,0xF9,0xFF,0xF0,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF9,0xFF,0xFF,0xFF,0xF8,0xFF,0xF0,0xFF,0xFF,0xF3,0xFF,0xFF,0xFF,0xFC,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xF0,0xFF,0xFF,0xC7,0xFF,0xFF,0xFF,0xFC,0x7F,0xF0,0xFF,0xFD,0x8F,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFC,0xFF,0xF0,0xFF,0xFD,0x0F,0xFF,0xFF,0xFF,0xEC,0xFF,0xF0,0xFF,0xF8,0x7F,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFC,0xFF,0xF0,0xFF,0xFC,0xFF,0xFF,0xFF,0xFF,0xF0,0xFF,0xF0,0xFF,0xF8,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0xFF,0xF0,0x7F,0xF0,0xFF,0xFC,0xFF,0xFF,0xFF,0xFF,0xF0,0x7F,0xF0,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0xF7,0xBF,0xF0,0xFF,0xF0,0xFF,0xFF,0xFF,0xFF,0xF7,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xF0,0xFF,0x00,0x7F,0xFF,0xFF,0xFF,0xF7,0x9F,0xF0,0xFF,0x00,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x01,0xFB,0x80,0x30,0xFF,0xFF,0xFF,0xFF,0x1F,0xFF,0xFF,0xFF,0xF0,0xFF,0xFF,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0xFF,0xFF,0xF0,</span></span>
<span class="line"><span style="color:#24292e;">};</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">static const unsigned char PROGMEM girl[] = {</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xFF,0xFC,0x01,0xFF,0xFF,0xFC,0xFF,0xC0,0x00,0x7F,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0xFC,0xFF,0x80,0x00,0x1F,0xFF,0xFC,0xFE,0x00,0x00,0x0F,0xFF,0xFC,0xFE,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x03,0xFF,0xFC,0xFC,0x00,0x00,0x01,0xFF,0xFC,0xF8,0x00,0x00,0x01,0xFF,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0xF8,0x00,0x00,0x00,0xFF,0xFC,0xF0,0x00,0x00,0x00,0xFF,0xFC,0xF8,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x7F,0xFC,0xF8,0x00,0x00,0x00,0x7F,0xFC,0xE0,0x00,0x00,0x00,0x7F,0xFC,0xE0,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x00,0xFF,0xFC,0xF0,0x00,0x00,0x00,0x7F,0xFC,0xF0,0x00,0x08,0x00,0x3F,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0xF0,0x00,0x18,0x00,0x3F,0xFC,0xE0,0x00,0x10,0x0F,0x3F,0xFC,0xE0,0x00,0x34,0x7F,</span></span>
<span class="line"><span style="color:#24292e;">	0x3F,0xFC,0xE0,0x00,0x3F,0xFF,0x3F,0xFC,0xE0,0x00,0x3F,0x0F,0xBF,0xFC,0xE0,0x10,</span></span>
<span class="line"><span style="color:#24292e;">	0x3F,0xFF,0x9F,0xFC,0xE0,0x30,0x3F,0xFF,0xDF,0xFC,0xE0,0x38,0x7F,0xFF,0xDF,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0xC0,0x3C,0x7F,0xFF,0xFF,0xFC,0xC0,0x3C,0x7F,0xFF,0x9F,0xFC,0xC0,0x1C,0x7F,0xFF,</span></span>
<span class="line"><span style="color:#24292e;">	0x9F,0xFC,0xC0,0x04,0x3F,0xFC,0x1F,0xFC,0xC0,0x00,0x3F,0xFF,0x1F,0xFC,0xC0,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x7F,0xFF,0x1F,0xFC,0xC0,0x00,0x7F,0xFF,0x1F,0xFC,0x80,0x00,0x7F,0xFF,0x1F,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0x80,0x00,0x7C,0x7E,0x1F,0xFC,0x80,0x00,0x7E,0x00,0x9F,0xFC,0x80,0x00,0xFE,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x3F,0xFC,0x80,0x00,0xC0,0x30,0xFF,0xFC,0xC0,0x00,0x00,0x27,0xFF,0xFC,0xC0,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x1F,0xED,0xFF,0xFC,0xF0,0x00,0x1E,0x2F,0xFF,0xB4,0xF8,0x00,0x42,0x05,0xFE,0x4C,</span></span>
<span class="line"><span style="color:#24292e;">	0xFC,0x40,0x3C,0x00,0xF8,0x1C,0xFF,0xF0,0x78,0x00,0x78,0x1C,0xFF,0xF2,0x78,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x78,0xBC,0xFF,0xF0,0xF0,0x00,0x3C,0xBC,0xFF,0xE3,0xE0,0x00,0x3F,0x9C,0xFF,0xEB,</span></span>
<span class="line"><span style="color:#24292e;">	0xC0,0x00,0x1F,0xFC,0xFF,0xE7,0x80,0x00,0x1F,0xFC,0xFF,0xDF,0x00,0x00,0x1F,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0xFF,0x5C,0x00,0x00,0x1F,0xFC,0xFF,0x70,0x00,0x00,0x1F,0xFC,0xFE,0xC4,0x00,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x1F,0xFC,0xFE,0x90,0x00,0x00,0x1F,0xFC,0xFC,0x60,0x00,0x00,0x0F,0xFC,0xFC,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x00,0x1B,0xFC,0xFC,0x00,0x00,0x00,0x13,0xFC,0xF8,0x00,0x00,0x00,0x13,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0xF8,0x00,0x00,0x00,0x01,0xFC,0xF8,0x00,0x00,0x00,0x00,0xFC,0xF8,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0xFC,0xF8,0x00,0x00,0x00,0x00,0xFC,0xFC,0x00,0x00,0x00,0x00,0xFC,0xFC,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x00,0x00,0xFC,0xFE,0x00,0x00,0x00,0x00,0xFC,0xFE,0x00,0x00,0x00,0x00,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">	0xFE,0x00,0x00,0x00,0x01,0xFC,0xFF,0x00,0x00,0x00,0x01,0xFC,0xFF,0x00,0x00,0x00,</span></span>
<span class="line"><span style="color:#24292e;">	0x03,0xFC,0xFF,0x00,0x00,0x00,0x03,0xFC,0xFF,0x00,0x00,0x00,0x07,0xFC,0xFF,0x80,</span></span>
<span class="line"><span style="color:#24292e;">	0x00,0x00,0x07,0xFC,</span></span>
<span class="line"><span style="color:#24292e;">};</span></span></code></pre></div><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;SPI.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Wire.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#F97583;">#include</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;image.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#E1E4E8;">Adafruit_SSD1306 display </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Adafruit_SSD1306</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">128</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">64</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">&amp;</span><span style="color:#FFAB70;">Wire</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">115200</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#E1E4E8;">  display.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#F97583;">0x</span><span style="color:#79B8FF;">3C</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">image_display</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">image_display</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">void</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 显示之前清屏</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">clearDisplay</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//1,2为显示起始位置,左上角为坐标原点</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//3位置为图形数组</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//4,5为图像宽度和高度(错误不会显示原像)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//6 颜色</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,boy, </span><span style="color:#79B8FF;">72</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">70</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">drawBitmap</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">75</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,girl, </span><span style="color:#79B8FF;">48</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">70</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//显示图形</span></span>
<span class="line"><span style="color:#E1E4E8;">    display.</span><span style="color:#B392F0;">display</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;SPI.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载SPI库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Wire.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Wire库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_GFX.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_GFX库</span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;Adafruit_SSD1306.h&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// 加载Adafruit_SSD1306库</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#D73A49;">#include</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;image.h&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 定义 OLED屏幕的分辨率</span></span>
<span class="line"><span style="color:#24292E;">Adafruit_SSD1306 display </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Adafruit_SSD1306</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">128</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">64</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">&amp;</span><span style="color:#E36209;">Wire</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">115200</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置串口波特率</span></span>
<span class="line"><span style="color:#24292E;">  display.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(SSD1306_SWITCHCAPVCC, </span><span style="color:#D73A49;">0x</span><span style="color:#005CC5;">3C</span><span style="color:#24292E;">);</span><span style="color:#6A737D;"> // 设置OLED的I2C地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">image_display</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">image_display</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">void</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 显示之前清屏</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">clearDisplay</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//1,2为显示起始位置,左上角为坐标原点</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//3位置为图形数组</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//4,5为图像宽度和高度(错误不会显示原像)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//6 颜色</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,boy, </span><span style="color:#005CC5;">72</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">70</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">drawBitmap</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">75</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,girl, </span><span style="color:#005CC5;">48</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">70</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//显示图形</span></span>
<span class="line"><span style="color:#24292E;">    display.</span><span style="color:#6F42C1;">display</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h5 id="_9-蜂鸣器使用-学习来自博客" tabindex="-1">9.蜂鸣器使用(学习来自<a href="https://blog.csdn.net/freewebsys/article/details/104586650/" target="_blank" rel="noreferrer">博客</a>) <a class="header-anchor" href="#_9-蜂鸣器使用-学习来自博客" aria-label="Permalink to &quot;9.蜂鸣器使用(学习来自[博客](https://blog.csdn.net/freewebsys/article/details/104586650/))&quot;">​</a></h5><div class="language-c vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// low</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">262</span><span style="color:#6A737D;"> // NOTE_C4  262  L1</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">294</span><span style="color:#6A737D;"> // NOTE_D4  294  L2</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">330</span><span style="color:#6A737D;"> // NOTE_E4  330  L3</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">349</span><span style="color:#6A737D;"> // NOTE_F4  349  L4</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL5</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">392</span><span style="color:#6A737D;"> // NOTE_G4  392  L5</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL6</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">440</span><span style="color:#6A737D;"> // NOTE_A4  440  L6</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDL7</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">494</span><span style="color:#6A737D;"> // NOTE_B4  494  L7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">523</span><span style="color:#6A737D;"> // NOTE_C5  523   1</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">587</span><span style="color:#6A737D;"> // NOTE_D5  587   2</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">659</span><span style="color:#6A737D;"> // NOTE_E5  659   3</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">698</span><span style="color:#6A737D;"> // NOTE_F5  698   4</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD5</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">784</span><span style="color:#6A737D;"> // NOTE_G5  784   5</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD6</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">880</span><span style="color:#6A737D;"> // NOTE_A5  880   6</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTD7</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">988</span><span style="color:#6A737D;"> // NOTE_B5  988   7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// high </span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1047</span><span style="color:#6A737D;"> // NOTE_C6  1047  H1</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1175</span><span style="color:#6A737D;"> // NOTE_D6  1175  H2</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1319</span><span style="color:#6A737D;"> // NOTE_E6  1319  H3</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1397</span><span style="color:#6A737D;"> // NOTE_F6  1397  H4</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH5</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1568</span><span style="color:#6A737D;"> // NOTE_G6  1568  H5</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH6</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1760</span><span style="color:#6A737D;"> // NOTE_A6  1760  H6</span></span>
<span class="line"><span style="color:#F97583;">#define</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NTDH7</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1976</span><span style="color:#6A737D;"> // NOTE_B6  1976  H7</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// notes in the melody:</span></span>
<span class="line"><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> melody</span><span style="color:#F97583;">[]</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD3,NTD2,NTD2,NTD1,NTD1,NTD2,NTD1,NTD2,NTD1,NTD2,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD0,NTD3,NTDH1,NTDH1,NTD7,NTD7,NTD6,NTD5,NTD5,NTD3,NTD3,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD0,NTD5,NTD6,NTD6,NTD6,NTD6,NTD6,NTD5,NTD5,NTD1,NTD1,NTD1,NTD2,NTD3,NTD0,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTDL5,NTDL5,NTD3,NTD2,NTD0,NTD1,NTD1,NTD1,NTD1,NTDL6,NTDL6,NTD2,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD0,NTD3,NTD2,NTD2,NTD1,NTD1,NTD2,NTD1,NTD2,NTD1,NTD2,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD0,NTD3,NTDH1,NTDH1,NTD7,NTD7,NTD6,NTD5,NTD5,NTD3,NTD3,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD0,NTD5,NTD6,NTD6,NTD6,NTD6,NTD6,NTD5,NTD5,NTD1,NTD1,NTD1,NTD2,NTD3,NTD0,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTDL5,NTDL5,NTD3,NTD2,NTD0,NTD2,NTD2,NTD3,NTD4,NTD5,NTD5,NTD2,</span></span>
<span class="line"><span style="color:#E1E4E8;">  NTD3,NTDL6,NTD2,NTD1,NTD0,NTD0,NTD2,NTD1,NTD0,NTD0,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// note durations: 4 = quarter note, 8 = eighth note, etc.:</span></span>
<span class="line"><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> noteDurations</span><span style="color:#F97583;">[]</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//针脚，GPIO后面的数字即是针脚数</span></span>
<span class="line"><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> tonepin</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">common_play</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//主要是 tone()函数，第一个参数是针脚数，第二个参数是设置电位强弱，第三个参数是持续时间</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> thisNote </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">; thisNote </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">sizeof</span><span style="color:#E1E4E8;">(melody)</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">; thisNote</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//节拍设置为8拍</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;"> noteDuration </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ( </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;"> ) </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">noteDurations</span><span style="color:#E1E4E8;">[thisNote];</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">tone</span><span style="color:#E1E4E8;">(tonepin, </span><span style="color:#FFAB70;">melody</span><span style="color:#E1E4E8;">[thisNote], noteDuration);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(noteDuration);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// stop the tone playing:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">noTone</span><span style="color:#E1E4E8;">(tonepin);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">begin</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">9600</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot; init ...&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">sizeof</span><span style="color:#E1E4E8;">(melody));</span></span>
<span class="line"><span style="color:#E1E4E8;">  Serial.</span><span style="color:#B392F0;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">sizeof</span><span style="color:#E1E4E8;">(noteDurations));</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//将该针脚作为输出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pinMode</span><span style="color:#E1E4E8;">(tonepin,OUTPUT);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">void</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">loop</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">common_play</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//Play the music.</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">delay</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;">);</span><span style="color:#6A737D;">//Pause for a while.</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// low</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">262</span><span style="color:#6A737D;"> // NOTE_C4  262  L1</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">294</span><span style="color:#6A737D;"> // NOTE_D4  294  L2</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">330</span><span style="color:#6A737D;"> // NOTE_E4  330  L3</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">349</span><span style="color:#6A737D;"> // NOTE_F4  349  L4</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL5</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">392</span><span style="color:#6A737D;"> // NOTE_G4  392  L5</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL6</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">440</span><span style="color:#6A737D;"> // NOTE_A4  440  L6</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDL7</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">494</span><span style="color:#6A737D;"> // NOTE_B4  494  L7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">523</span><span style="color:#6A737D;"> // NOTE_C5  523   1</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">587</span><span style="color:#6A737D;"> // NOTE_D5  587   2</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">659</span><span style="color:#6A737D;"> // NOTE_E5  659   3</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">698</span><span style="color:#6A737D;"> // NOTE_F5  698   4</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD5</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">784</span><span style="color:#6A737D;"> // NOTE_G5  784   5</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD6</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">880</span><span style="color:#6A737D;"> // NOTE_A5  880   6</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTD7</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">988</span><span style="color:#6A737D;"> // NOTE_B5  988   7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// high </span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1047</span><span style="color:#6A737D;"> // NOTE_C6  1047  H1</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1175</span><span style="color:#6A737D;"> // NOTE_D6  1175  H2</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1319</span><span style="color:#6A737D;"> // NOTE_E6  1319  H3</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1397</span><span style="color:#6A737D;"> // NOTE_F6  1397  H4</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH5</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1568</span><span style="color:#6A737D;"> // NOTE_G6  1568  H5</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH6</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1760</span><span style="color:#6A737D;"> // NOTE_A6  1760  H6</span></span>
<span class="line"><span style="color:#D73A49;">#define</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NTDH7</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1976</span><span style="color:#6A737D;"> // NOTE_B6  1976  H7</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// notes in the melody:</span></span>
<span class="line"><span style="color:#D73A49;">int</span><span style="color:#24292E;"> melody</span><span style="color:#D73A49;">[]</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  NTD3,NTD2,NTD2,NTD1,NTD1,NTD2,NTD1,NTD2,NTD1,NTD2,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#24292E;">  NTD0,NTD3,NTDH1,NTDH1,NTD7,NTD7,NTD6,NTD5,NTD5,NTD3,NTD3,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#24292E;">  NTD0,NTD5,NTD6,NTD6,NTD6,NTD6,NTD6,NTD5,NTD5,NTD1,NTD1,NTD1,NTD2,NTD3,NTD0,</span></span>
<span class="line"><span style="color:#24292E;">  NTDL5,NTDL5,NTD3,NTD2,NTD0,NTD1,NTD1,NTD1,NTD1,NTDL6,NTDL6,NTD2,</span></span>
<span class="line"><span style="color:#24292E;">  NTD0,NTD3,NTD2,NTD2,NTD1,NTD1,NTD2,NTD1,NTD2,NTD1,NTD2,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#24292E;">  NTD0,NTD3,NTDH1,NTDH1,NTD7,NTD7,NTD6,NTD5,NTD5,NTD3,NTD3,NTD5,NTD6,NTD5,NTD5,</span></span>
<span class="line"><span style="color:#24292E;">  NTD0,NTD5,NTD6,NTD6,NTD6,NTD6,NTD6,NTD5,NTD5,NTD1,NTD1,NTD1,NTD2,NTD3,NTD0,</span></span>
<span class="line"><span style="color:#24292E;">  NTDL5,NTDL5,NTD3,NTD2,NTD0,NTD2,NTD2,NTD3,NTD4,NTD5,NTD5,NTD2,</span></span>
<span class="line"><span style="color:#24292E;">  NTD3,NTDL6,NTD2,NTD1,NTD0,NTD0,NTD2,NTD1,NTD0,NTD0,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// note durations: 4 = quarter note, 8 = eighth note, etc.:</span></span>
<span class="line"><span style="color:#D73A49;">int</span><span style="color:#24292E;"> noteDurations</span><span style="color:#D73A49;">[]</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">12</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">8</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//针脚，GPIO后面的数字即是针脚数</span></span>
<span class="line"><span style="color:#D73A49;">int</span><span style="color:#24292E;"> tonepin</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">common_play</span><span style="color:#24292E;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//主要是 tone()函数，第一个参数是针脚数，第二个参数是设置电位强弱，第三个参数是持续时间</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> thisNote </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">; thisNote </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">sizeof</span><span style="color:#24292E;">(melody)</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">; thisNote</span><span style="color:#D73A49;">++</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//节拍设置为8拍</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> noteDuration </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ( </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> ) </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#E36209;">noteDurations</span><span style="color:#24292E;">[thisNote];</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">tone</span><span style="color:#24292E;">(tonepin, </span><span style="color:#E36209;">melody</span><span style="color:#24292E;">[thisNote], noteDuration);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(noteDuration);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// stop the tone playing:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">noTone</span><span style="color:#24292E;">(tonepin);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">begin</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">9600</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot; init ...&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">sizeof</span><span style="color:#24292E;">(melody));</span></span>
<span class="line"><span style="color:#24292E;">  Serial.</span><span style="color:#6F42C1;">print</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">sizeof</span><span style="color:#24292E;">(noteDurations));</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//将该针脚作为输出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pinMode</span><span style="color:#24292E;">(tonepin,OUTPUT);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">void</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">loop</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">common_play</span><span style="color:#24292E;">();</span><span style="color:#6A737D;">//Play the music.</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">delay</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">3000</span><span style="color:#24292E;">);</span><span style="color:#6A737D;">//Pause for a while.</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-ef5dee53><!--[--><!--]--><!----><nav class="prev-next" data-v-ef5dee53><div class="pager" data-v-ef5dee53><!----></div><div class="pager" data-v-ef5dee53><a class="pager-link next" href="/guide/microcontroller/esp8266/esp8266-blinker.html" data-v-ef5dee53><span class="desc" data-v-ef5dee53>Next page</span><span class="title" data-v-ef5dee53>esp8266-blinker</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_java_database_readme.md\":\"16e9626a\",\"guide_java_database_mysql_mysql-mysql索引.md\":\"f3575a6e\",\"guide_java_javabasic_lombok.md\":\"ec1eece7\",\"guide_java_database_oracle_oracle-触发器.md\":\"2a3fe037\",\"guide_java_index.md\":\"8fd206ef\",\"guide_java_javabasic_jvm.md\":\"4cef192b\",\"guide_java_javabasic_gc垃圾回收思想.md\":\"3ef715b8\",\"guide_java_javabasic_序列化和反序列化.md\":\"c89f7aa5\",\"guide_java_springbasic_get和post.md\":\"9d4f8a37\",\"guide_java_javabasic_数据结构.md\":\"027c1b95\",\"guide_java_javabasic_localdatetime.md\":\"19948cd6\",\"guide_java_database_mysql_mysql-lock.md\":\"86a9aa44\",\"guide_java_javabasic_数据类型.md\":\"67ee21c0\",\"guide_java_javabasic_jframe.md\":\"f7549916\",\"guide_java_springbasic_异步任务.md\":\"9b52ab0a\",\"guide_java_database_mysql_mysql-mysql8配置.md\":\"968b5595\",\"guide_java_javabasic_锁.md\":\"2d3174c2\",\"guide_java_springbasic_参数接收.md\":\"63b22129\",\"guide_java_database_oracle_oracle-数据库学习.md\":\"2f37199c\",\"guide_java_database_mysql_mysql-数据库连接.md\":\"734ce01d\",\"guide_java_javabasic_反射.md\":\"0f402427\",\"guide_java_javabasic_jwt.md\":\"d76538c9\",\"guide_java_springbasic_抛出全局异常.md\":\"5546df58\",\"guide_java_javabasic_格式转换.md\":\"38220b6a\",\"guide_java_springbasic_循环依赖.md\":\"d66e2d71\",\"guide_java_javabasic_正则表达式.md\":\"760cae42\",\"guide_java_springcloud_分布式锁_zookeeper分布式锁.md\":\"3e320160\",\"guide_java_springboot_mybatis_mybatis流式查询.md\":\"be36acc7\",\"guide_java_other_docker.md\":\"6995a753\",\"guide_java_springboot_native.md\":\"2051d4c9\",\"guide_java_other_promethus.md\":\"57b4e337\",\"guide_java_springboot_validation.md\":\"a8892315\",\"guide_java_springcloud_spring cloud alibaba_gateway.md\":\"5fa8399a\",\"guide_java_javabasic_web作用域.md\":\"3cac8230\",\"guide_java_springcloud_spring cloud alibaba_seata.md\":\"432a43ca\",\"other_about.md\":\"d350a983\",\"guide_python_index.md\":\"4ac9270e\",\"guide_java_springboot_promethus.md\":\"a36c80b9\",\"guide_java_springboot_swagger_swagger.md\":\"5b97fb31\",\"guide_microcontroller_index.md\":\"4fe81fea\",\"guide_java_springboot_elasticsearch.md\":\"86f90b93\",\"guide_microcontroller_esp8266_esp8266-blinker.md\":\"33424435\",\"index.md\":\"07a9f4ac\",\"guide_java_springcloud_spring cloud netflix_hystrix.md\":\"3d6eb89b\",\"guide_java_springcloud_spring cloud alibaba_sentinel.md\":\"5fb3469a\",\"guide_java_springbasic_获取配置文件数据.md\":\"2d5763d2\",\"guide_java_springcloud_spring cloud netflix_eureka.md\":\"188fc921\",\"guide_java_javabasic_基础小点杂.md\":\"63dde17c\",\"guide_java_springboot_maven.md\":\"c51cbb5f\",\"guide_java_database_mysql_mysql-mysql小点杂.md\":\"b86897f6\",\"guide_java_javabasic_io流.md\":\"4a7f8339\",\"guide_java_springboot_重试机制.md\":\"76d26fb8\",\"guide_java_springboot_flowable_flowable.md\":\"6e19ca46\",\"guide_java_springboot_mybatis_mybatis流式查询导出成csv.md\":\"c1f2c5d3\",\"guide_java_springboot_mybatis_mybatisplus.md\":\"f179493a\",\"guide_java_springcloud_spring cloud netflix_feign.md\":\"a0df6405\",\"guide_java_springcloud_spring cloud alibaba_nacos.md\":\"d0e0d653\",\"guide_java_springboot_websocket.md\":\"0991ccb8\",\"guide_java_springboot_swagger_swagger3.md\":\"1967f824\",\"guide_java_springboot_flowable_flowable-new.md\":\"37abdb7b\",\"guide_java_springboot_webflux.md\":\"4f040419\",\"guide_java_springcloud_分布式锁_redis分布式锁.md\":\"eac7d086\",\"guide_java_javabasic_设计模式.md\":\"c5164058\",\"guide_java_springcloud_spring cloud netflix_ribbon.md\":\"805f8f5e\",\"guide_java_springcloud_消息中间件_rabbitmq.md\":\"b5b13d26\",\"guide_java_springcloud_消息中间件_disruptor.md\":\"9d61c672\",\"guide_java_springcloud_消息中间件_kafka.md\":\"20ccd75b\",\"guide_java_springboot_缓存.md\":\"6c37376e\",\"guide_python_pythonbasic_python基础.md\":\"25b269e6\",\"guide_java_springbasic_ioc和aop.md\":\"5fedb68b\",\"guide_java_springboot_security.md\":\"59fcadbe\",\"guide_java_javabasic_poi.md\":\"2210d09a\",\"guide_java_springboot_log.md\":\"8a262b83\",\"guide_java_springboot_minio.md\":\"96fb9869\",\"guide_java_javabasic_http请求.md\":\"3a5003a2\",\"guide_java_springboot_多数据源.md\":\"eca69f27\",\"guide_java_springboot_mybatis_mybatis.md\":\"9e0fa038\",\"guide_java_javabasic_poi-easyexcel.md\":\"3046f927\",\"guide_microcontroller_esp8266_esp8266.md\":\"2969a179\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"VitePress\",\"description\":\"A VitePress site\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"Simplemw's blog\",\"logo\":\"images/touxiang.png\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"知识体系\",\"items\":[{\"text\":\"前端\",\"items\":[{\"text\":\"待学习\",\"link\":\"/\"}]},{\"text\":\"后端\",\"items\":[{\"text\":\"JAVA\",\"link\":\"/guide/java/\"},{\"text\":\"PYTHON\",\"link\":\"/guide/python/\"}]},{\"text\":\"嵌入式\",\"items\":[{\"text\":\"单片机\",\"link\":\"/guide/microcontroller/\"}]}]},{\"text\":\"关于\",\"link\":\"other/about\"}],\"sidebar\":{\"/guide/java\":[{\"text\":\"数据库\",\"collapsed\":true,\"items\":[{\"text\":\"Oracle\",\"collapsed\":true,\"items\":[{\"text\":\"Oracle-触发器\",\"link\":\"/guide/java/database/oracle/Oracle-触发器.md\"},{\"text\":\"Oracle-数据库学习\",\"link\":\"/guide/java/database/oracle/Oracle-数据库学习.md\"}]},{\"text\":\"Mysql\",\"collapsed\":true,\"items\":[{\"text\":\"mysql-数据库连接\",\"link\":\"/guide/java/database/mysql/mysql-数据库连接.md\"},{\"text\":\"mysql-mysql8配置\",\"link\":\"/guide/java/database/mysql/mysql-mysql8配置.md\"},{\"text\":\"mysql-mysql索引\",\"link\":\"/guide/java/database/mysql/mysql-mysql索引.md\"},{\"text\":\"mysql-mysql小点杂\",\"link\":\"/guide/java/database/mysql/mysql-mysql小点杂.md\"},{\"text\":\"mysql-lock\",\"link\":\"/guide/java/database/mysql/mysql-lock.md\"}]},{\"text\":\"Sqlserver\",\"collapsed\":true,\"items\":[]}]},{\"text\":\"java基础\",\"collapsed\":true,\"items\":[{\"text\":\"GC垃圾回收思想\",\"link\":\"/guide/java/javabasic/GC垃圾回收思想.md\"},{\"text\":\"Http请求\",\"link\":\"/guide/java/javabasic/Http请求.md\"},{\"text\":\"IO流\",\"link\":\"/guide/java/javabasic/IO流.md\"},{\"text\":\"JFrame\",\"link\":\"/guide/java/javabasic/JFrame.md\"},{\"text\":\"jvm\",\"link\":\"/guide/java/javabasic/jvm.md\"},{\"text\":\"jwt\",\"link\":\"/guide/java/javabasic/jwt.md\"},{\"text\":\"LocalDateTime\",\"link\":\"/guide/java/javabasic/LocalDateTime.md\"},{\"text\":\"lombok\",\"link\":\"/guide/java/javabasic/lombok.md\"},{\"text\":\"Poi\",\"link\":\"/guide/java/javabasic/poi.md\"},{\"text\":\"Easyexcel\",\"link\":\"/guide/java/javabasic/poi-easyexcel.md\"},{\"text\":\"web作用域\",\"link\":\"/guide/java/javabasic/web作用域.md\"},{\"text\":\"反射\",\"link\":\"/guide/java/javabasic/反射.md\"},{\"text\":\"基础小点杂\",\"link\":\"/guide/java/javabasic/基础小点杂.md\"},{\"text\":\"序列化和反序列化\",\"link\":\"/guide/java/javabasic/序列化和反序列化.md\"},{\"text\":\"数据类型\",\"link\":\"/guide/java/javabasic/数据类型.md\"},{\"text\":\"格式转换\",\"link\":\"/guide/java/javabasic/格式转换.md\"},{\"text\":\"正则表达式\",\"link\":\"/guide/java/javabasic/正则表达式.md\"},{\"text\":\"设计模式\",\"link\":\"/guide/java/javabasic/设计模式.md\"},{\"text\":\"锁\",\"link\":\"/guide/java/javabasic/锁.md\"}]},{\"text\":\"Spring基础\",\"collapsed\":true,\"items\":[{\"text\":\"GET和POST\",\"link\":\"/guide/java/springbasic/GET和POST.md\"},{\"text\":\"IOC和AOP\",\"link\":\"/guide/java/springbasic/IOC和AOP.md\"},{\"text\":\"参数接收\",\"link\":\"/guide/java/springbasic/参数接收.md\"},{\"text\":\"异步任务\",\"link\":\"/guide/java/springbasic/异步任务.md\"},{\"text\":\"循环依赖\",\"link\":\"/guide/java/springbasic/循环依赖.md\"},{\"text\":\"抛出全局异常\",\"link\":\"/guide/java/springbasic/抛出全局异常.md\"},{\"text\":\"获取配置文件数据\",\"link\":\"/guide/java/springbasic/获取配置文件数据.md\"}]},{\"text\":\"SpringBoot\",\"collapsed\":true,\"items\":[{\"text\":\"mybatis\",\"collapsed\":true,\"items\":[{\"text\":\"mybatis\",\"link\":\"/guide/java/SpringBoot/mybatis/mybatis.md\"},{\"text\":\"mybatisplus\",\"link\":\"/guide/java/SpringBoot/mybatis/mybatisplus.md\"},{\"text\":\"mybatis流式查询\",\"link\":\"/guide/java/SpringBoot/mybatis/mybatis流式查询.md\"},{\"text\":\"mybatis流式查询导出成csv\",\"link\":\"/guide/java/SpringBoot/mybatis/mybatis流式查询导出成csv.md\"}]},{\"text\":\"swagger\",\"collapsed\":true,\"items\":[{\"text\":\"swagger\",\"link\":\"/guide/java/SpringBoot/swagger/swagger.md\"},{\"text\":\"swagger3\",\"link\":\"/guide/java/SpringBoot/swagger/swagger3.md\"}]},{\"text\":\"flowable\",\"collapsed\":true,\"items\":[{\"text\":\"Flowable\",\"link\":\"/guide/java/SpringBoot/flowable/Flowable.md\"},{\"text\":\"Flowable-new\",\"link\":\"/guide/java/SpringBoot/flowable/Flowable-new.md\"}]},{\"text\":\"elasticsearch\",\"link\":\"/guide/java/SpringBoot/elasticsearch.md\"},{\"text\":\"maven\",\"link\":\"/guide/java/SpringBoot/maven.md\"},{\"text\":\"native\",\"link\":\"/guide/java/SpringBoot/native.md\"},{\"text\":\"security\",\"link\":\"/guide/java/SpringBoot/security.md\"},{\"text\":\"Promethus\",\"link\":\"/guide/java/SpringBoot/Promethus.md\"},{\"text\":\"validation\",\"link\":\"/guide/java/SpringBoot/validation.md\"},{\"text\":\"websocket\",\"link\":\"/guide/java/SpringBoot/websocket.md\"},{\"text\":\"webflux\",\"link\":\"/guide/java/SpringBoot/webflux.md\"},{\"text\":\"minio\",\"link\":\"/guide/java/SpringBoot/minio.md\"},{\"text\":\"缓存机制\",\"link\":\"/guide/java/SpringBoot/缓存.md\"},{\"text\":\"多数据源\",\"link\":\"/guide/java/SpringBoot/多数据源.md\"},{\"text\":\"日志配置\",\"link\":\"/guide/java/SpringBoot/log.md\"},{\"text\":\"重试机制\",\"link\":\"/guide/java/SpringBoot/重试机制.md\"}]},{\"text\":\"SpringCloud\",\"collapsed\":true,\"items\":[{\"text\":\"Spring Cloud Netflix\",\"collapsed\":true,\"items\":[{\"text\":\"Eureka\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Netflix/Eureka.md\"},{\"text\":\"Feign\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Netflix/Feign.md\"},{\"text\":\"Hystrix\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Netflix/Hystrix.md\"},{\"text\":\"Ribbon\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Netflix/Ribbon.md\"}]},{\"text\":\"Spring Cloud Alibaba\",\"collapsed\":true,\"items\":[{\"text\":\"Gateway\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Alibaba/Gateway.md\"},{\"text\":\"Nacos\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Alibaba/Nacos.md\"},{\"text\":\"Seata\",\"link\":\"/guide/java/SpringCloud/Spring Cloud Alibaba/Seata.md\"}]},{\"text\":\"消息中间件\",\"collapsed\":true,\"items\":[{\"text\":\"Kafka\",\"link\":\"/guide/java/SpringCloud/消息中间件/Kafka.md\"},{\"text\":\"RabbitMq\",\"link\":\"/guide/java/SpringCloud/消息中间件/RabbitMq.md\"},{\"text\":\"Disruptor\",\"link\":\"/guide/java/SpringCloud/消息中间件/Disruptor.md\"}]},{\"text\":\"分布式锁\",\"collapsed\":true,\"items\":[{\"text\":\"Redis分布式锁\",\"link\":\"/guide/java/分布式锁/Redis分布式锁.md\"},{\"text\":\"Zookeeper分布式锁\",\"link\":\"/guide/java/分布式锁/Zookeeper分布式锁.md\"}]}]},{\"text\":\"other\",\"collapsed\":true,\"items\":[{\"text\":\"Promethus\",\"link\":\"/guide/java/other/promethus.md\"},{\"text\":\"docker\",\"link\":\"/guide/java/other/docker.md\"}]}],\"/guide/python\":[{\"text\":\"python基础\",\"collapsed\":false,\"items\":[{\"text\":\"python基础\",\"link\":\"/guide/python/pythonbasic/python基础.md\"}]}],\"/guide/microcontroller\":[{\"text\":\"ESP8266\",\"collapsed\":false,\"items\":[{\"text\":\"esp8266\",\"link\":\"/guide/microcontroller/esp8266/esp8266.md\"},{\"text\":\"esp8266-blinker\",\"link\":\"/guide/microcontroller/esp8266/esp8266-blinker.md\"}]},{\"text\":\"STM32\",\"collapsed\":false,\"items\":[]},{\"text\":\"ESP32\",\"collapsed\":false,\"items\":[]}]},\"lastUpdated\":{\"text\":\"Updated at\",\"formatOptions\":{\"dateStyle\":\"full\",\"timeStyle\":\"medium\"}},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>